{"ast":null,"code":"import _regeneratorRuntime from\"/home/oskaragh/stremingly/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oskaragh/stremingly/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext,useEffect}from'react';import{useParams}from\"react-router-dom\";import Songlist from\"./Songlist\";import playerContext from'../context/PlayerContext';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function GenreSongs(){var _useParams=useParams(),name=_useParams.name,id=_useParams.id;var _useContext=useContext(playerContext),SetCurrent=_useContext.SetCurrent,currentSong=_useContext.currentSong,songs=_useContext.songs,albums=_useContext.albums,setSongs=_useContext.setSongs,setAlbum=_useContext.setAlbum;// const [song, setSong] = useState([])\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios(\"http://localhost:3000/api/albums?limit=1000&offset=0\");case 2:result=_context.sent;setAlbum(result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios(\"http://localhost:3000/api/genres/\"+id+\"/songs?limit=1000&offset=0\");case 2:result=_context2.sent;setSongs(result.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"body__info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"body__infoText\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Categorie: \",name]}),/*#__PURE__*/_jsx(\"p\",{})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body__songs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"body__icons\"}),songs.map(function(song,i){if(typeof song.artists!=='undefined'){var albumtIneed=albums.find(function(album){return album.id===song.album_id;});if(typeof song.artists!=='undefined'){var newArtist=song.artists.toString().replace(/[0-9]/g,'').replace(',',' ');var newGenre=song.genres.toString().replace(/[0-9]/g,'').replace(',',' ').replace(',,',' ').replace(',,',' ');if(typeof albumtIneed!=='undefined'){return/*#__PURE__*/_jsx(\"div\",{className:'songContainer '+(currentSong===i?'selected1':''),onClick:function onClick(){SetCurrent(i);},children:/*#__PURE__*/_jsx(Songlist,{title:song.title,artist:newArtist,genre:newGenre,img_src:\"http://localhost:3000/media/\"+albumtIneed.media},i)},song.id);}}}})]})]});}export default GenreSongs;","map":null,"metadata":{},"sourceType":"module"}